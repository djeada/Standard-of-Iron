{
  "id": "battle_of_cannae",
  "title": "Battle of Cannae",
  "summary": "Execute the encirclement while Roman reserves reinforce from secondary camps and flanks.",
  "teaching_goal": "Large-scale offense with multi-front awareness. Teaches maintaining an encirclement under pressure.",
  "narrative_intent": "Hannibal's masterpiece becomes a prolonged operational battle, not a single frontal collision.",
  "historical_context": "216 BC: Hannibal faced a numerically superior Roman force near Cannae and won through coordinated enveloping tactics.",
  "terrain_type": "plains",
  "map_path": ":/assets/maps/map_battle_cannae.json",
  "player_setup": {
    "nation": "carthage",
    "faction": "carthaginian",
    "color": "brown",
    "starting_units": [],
    "starting_buildings": [],
    "starting_resources": {
      "gold": 650,
      "food": 520
    }
  },
  "ai_setups": [
    {
      "id": "roman_consular_line",
      "nation": "roman_republic",
      "faction": "roman",
      "color": "red",
      "team_id": 1,
      "difficulty": "very_hard",
      "strategy": "aggressive",
      "personality": {
        "aggression": 0.9,
        "defense": 0.3,
        "harassment": 0.25
      },
      "starting_units": [],
      "starting_buildings": [],
      "waves": [
        {
          "timing": 210.0,
          "composition": [
            {"type": "spearman", "count": 12},
            {"type": "swordsman", "count": 10},
            {"type": "archer", "count": 6}
          ],
          "entry_point": {"x": 155, "z": 60}
        },
        {
          "timing": 420.0,
          "composition": [
            {"type": "horse_swordsman", "count": 6},
            {"type": "spearman", "count": 8}
          ],
          "entry_point": {"x": 150, "z": 40}
        }
      ]
    },
    {
      "id": "roman_reserve_wing",
      "nation": "roman_republic",
      "faction": "roman",
      "color": "orange",
      "team_id": 1,
      "difficulty": "hard",
      "strategy": "defensive",
      "personality": {
        "aggression": 0.7,
        "defense": 0.6,
        "harassment": 0.35
      },
      "starting_units": [],
      "starting_buildings": [
        {
          "type": "barracks",
          "position": {"x": 160, "z": 25},
          "max_population": 220
        }
      ],
      "waves": [
        {
          "timing": 300.0,
          "composition": [
            {"type": "spearman", "count": 8},
            {"type": "swordsman", "count": 8},
            {"type": "horse_swordsman", "count": 4}
          ],
          "entry_point": {"x": 160, "z": 25}
        },
        {
          "timing": 540.0,
          "composition": [
            {"type": "spearman", "count": 10},
            {"type": "swordsman", "count": 10},
            {"type": "archer", "count": 6}
          ],
          "entry_point": {"x": 160, "z": 25}
        }
      ]
    }
  ],
  "victory_conditions": [
    {
      "type": "destroy_all_enemies",
      "description": "Destroy the Roman army and all Roman camps"
    }
  ],
  "defeat_conditions": [
    {
      "type": "lose_structure",
      "structure_type": "barracks",
      "description": "Do not lose your command barracks"
    },
    {
      "type": "lose_all_units",
      "description": "Do not lose all your units"
    }
  ],
  "optional_objectives": [
    {
      "type": "control_structures",
      "structure_types": ["village"],
      "min_count": 1,
      "description": "Hold the Cannae village ruins during the encirclement"
    }
  ],
  "events": [
    {
      "trigger": {
        "type": "timer",
        "time": 90.0
      },
      "actions": [
        {
          "type": "show_message",
          "text": "Fix the Roman center in place. Keep both cavalry wings active."
        }
      ]
    },
    {
      "trigger": {
        "type": "timer",
        "time": 240.0
      },
      "actions": [
        {
          "type": "show_message",
          "text": "Roman reserves are entering from the northern camp. Close the pocket faster."
        }
      ]
    },
    {
      "trigger": {
        "type": "timer",
        "time": 420.0
      },
      "actions": [
        {
          "type": "show_message",
          "text": "Second-wave Roman cavalry is maneuvering for your rear. Rebalance your flanks."
        }
      ]
    }
  ]
}
